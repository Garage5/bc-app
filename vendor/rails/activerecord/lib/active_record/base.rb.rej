***************
*** 2305,2315 ****
  
                # Extract table name from qualified attribute names.
                if attr.include?('.')
-                 table_name, attr = attr.split('.', 2)
-                 table_name = connection.quote_table_name(table_name)
                end
  
-               attribute_condition("#{table_name}.#{connection.quote_column_name(attr)}", value)
              else
                sanitize_sql_hash_for_conditions(value, connection.quote_table_name(attr.to_s))
              end
--- 2305,2317 ----
  
                # Extract table name from qualified attribute names.
                if attr.include?('.')
+                 attr_table_name, attr = attr.split('.', 2)
+                 attr_table_name = connection.quote_table_name(attr_table_name)
+               else
+                 attr_table_name = table_name
                end
  
+               attribute_condition("#{attr_table_name}.#{connection.quote_column_name(attr)}", value)
              else
                sanitize_sql_hash_for_conditions(value, connection.quote_table_name(attr.to_s))
              end
